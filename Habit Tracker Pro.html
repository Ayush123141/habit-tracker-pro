<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Habit Tracker Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f8fafc;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-dark: rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.6s ease-out;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .glass {
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .glass:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 5px;
        }

        .form-section {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.95rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(236, 72, 153, 0.3);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: var(--primary);
            color: #fff;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: #fff;
        }

        .btn-secondary:hover {
            background: #db2370;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: #fff;
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-danger {
            background: var(--danger);
            color: #fff;
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-full {
            width: 100%;
        }

        .habits-section {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .habits-section h2 {
            margin-bottom: 25px;
            font-size: 1.8rem;
        }

        .habit-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .habit-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
        }

        .habit-card.completed {
            background: rgba(16, 185, 129, 0.15);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .habit-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .habit-priority {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .priority-high {
            background: rgba(239, 68, 68, 0.3);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #fca5a5;
        }

        .priority-medium {
            background: rgba(245, 158, 11, 0.3);
            border: 1px solid rgba(245, 158, 11, 0.5);
            color: #fcd34d;
        }

        .priority-low {
            background: rgba(16, 185, 129, 0.3);
            border: 1px solid rgba(16, 185, 129, 0.5);
            color: #a7f3d0;
        }

        .habit-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .habit-stat {
            font-size: 0.9rem;
        }

        .habit-stat-label {
            opacity: 0.7;
            font-size: 0.85rem;
        }

        .habit-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
            display: block;
        }

        .days-tracker {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .day-btn {
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .day-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .day-btn.active {
            background: var(--success);
            border-color: var(--success);
        }

        .habit-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.8;
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .analytics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
        }

        .chart-card h3 {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .top-habits {
            list-style: none;
        }

        .top-habits li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .top-habits li:last-child {
            border-bottom: none;
        }

        .habit-badge {
            background: var(--secondary);
            color: #fff;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .habit-card {
            animation: fadeIn 0.3s ease-out;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .main-grid {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 15px;
            }

            .glass, .form-section, .habits-section, .chart-card {
                padding: 20px;
            }

            .days-tracker {
                grid-template-columns: repeat(7, 1fr);
                gap: 6px;
            }

            .day-btn {
                padding: 8px;
                font-size: 0.8rem;
            }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(15, 23, 42, 0.9) 100%);
            margin: 10% auto;
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 400px;
            animation: slideDown 0.3s ease-out;
        }

        .close-btn {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #fff;
        }

        .close-btn:hover {
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <canvas id="particleCanvas"></canvas>

    <div class="container">
        <header>
            <h1>üöÄ Habit Tracker Pro</h1>
            <p class="subtitle">Build better habits, one day at a time</p>
        </header>

        <!-- Statistics Dashboard -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" id="totalHabits">0</span>
                <span class="stat-label">Total Habits</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="completedToday">0</span>
                <span class="stat-label">Completed Today</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="completionRate">0%</span>
                <span class="stat-label">Completion Rate</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="longestStreak">0</span>
                <span class="stat-label">Longest Streak</span>
            </div>
        </div>

        <!-- Add Habit Form -->
        <div class="form-section">
            <h2>‚ûï Add New Habit</h2>
            <form id="habitForm">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Habit Name</label>
                        <input type="text" id="habitName" placeholder="e.g., Morning Exercise" required>
                    </div>
                    <div class="form-group">
                        <label>Frequency</label>
                        <select id="frequency" required>
                            <option>Daily</option>
                            <option>Weekly</option>
                            <option>Custom</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Priority</label>
                        <select id="priority" required>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Deadline</label>
                        <input type="date" id="deadline" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Description (Optional)</label>
                    <textarea id="description" placeholder="Add notes about this habit..." rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-full">Add Habit</button>
            </form>
        </div>

        <!-- Habits Display -->
        <div class="habits-section">
            <h2>üìã Your Habits</h2>
            <div id="habitsContainer">
                <div class="empty-state">
                    <div class="empty-state-icon">üéØ</div>
                    <p>No habits yet. Start by adding your first habit above!</p>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div class="analytics">
            <div class="chart-card">
                <h3>üìä Top Performers</h3>
                <ul class="top-habits" id="topHabits">
                    <li style="opacity: 0.5;">No habits tracked yet</li>
                </ul>
            </div>

            <div class="chart-card">
                <h3>üìà Weekly Overview</h3>
                <div id="weeklyStats">
                    <p style="opacity: 0.5;">Start tracking to see stats</p>
                </div>
            </div>

            <div class="chart-card">
                <h3>‚è∞ Upcoming Deadlines</h3>
                <ul id="deadlines" style="list-style: none;">
                    <li style="opacity: 0.5;">No deadlines</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Particle Animation System
        class ParticleSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.mousePos = { x: 0, y: 0 };
                this.particleCount = 50;

                this.resize();
                window.addEventListener('resize', () => this.resize());
                window.addEventListener('mousemove', (e) => this.updateMouse(e));
                this.animate();
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            updateMouse(e) {
                this.mousePos = { x: e.clientX, y: e.clientY };
            }

            createParticle() {
                return {
                    x: Math.random() * this.canvas.width,
                    y: Math.random() * this.canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    size: Math.random() * 2 + 1,
                    opacity: Math.random() * 0.5 + 0.2,
                    color: `hsl(${Math.random() * 60 + 280}, 80%, 60%)`
                };
            }

            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                if (this.particles.length < this.particleCount) {
                    this.particles.push(this.createParticle());
                }

                this.particles.forEach((p, i) => {
                    const dx = this.mousePos.x - p.x;
                    const dy = this.mousePos.y - p.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const force = 100 / (distance + 1);

                    if (distance < 150) {
                        p.vx += (dx / distance) * force * 0.002;
                        p.vy += (dy / distance) * force * 0.002;
                    }

                    p.x += p.vx;
                    p.y += p.vy;
                    p.vx *= 0.99;
                    p.vy *= 0.99;

                    if (p.x < 0) p.x = this.canvas.width;
                    if (p.x > this.canvas.width) p.x = 0;
                    if (p.y < 0) p.y = this.canvas.height;
                    if (p.y > this.canvas.height) p.y = 0;

                    this.ctx.fillStyle = p.color;
                    this.ctx.globalAlpha = p.opacity;
                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    this.ctx.fill();
                });

                this.ctx.globalAlpha = 1;
                requestAnimationFrame(() => this.animate());
            }
        }

        // Habit Tracker Application
        class HabitTracker {
            constructor() {
                this.habits = this.loadHabits();
                this.today = new Date().toISOString().split('T')[0];
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.renderHabits();
                this.updateStats();
                this.updateAnalytics();
            }

            setupEventListeners() {
                document.getElementById('habitForm').addEventListener('submit', (e) => this.addHabit(e));
            }

            addHabit(e) {
                e.preventDefault();

                const habit = {
                    id: Date.now(),
                    name: document.getElementById('habitName').value,
                    frequency: document.getElementById('frequency').value,
                    priority: document.getElementById('priority').value,
                    deadline: document.getElementById('deadline').value,
                    description: document.getElementById('description').value,
                    createdAt: new Date().toISOString(),
                    completedDays: [],
                    streak: 0
                };

                this.habits.push(habit);
                this.saveHabits();
                this.renderHabits();
                this.updateStats();
                this.updateAnalytics();
                document.getElementById('habitForm').reset();
            }

            toggleDay(habitId, day) {
                const habit = this.habits.find(h => h.id === habitId);
                if (!habit) return;

                if (!habit.completedDays) habit.completedDays = [];

                const index = habit.completedDays.indexOf(day);
                if (index > -1) {
                    habit.completedDays.splice(index, 1);
                } else {
                    habit.completedDays.push(day);
                }

                this.updateStreak(habit);
                this.saveHabits();
                this.renderHabits();
                this.updateStats();
                this.updateAnalytics();
            }

            updateStreak(habit) {
                const today = new Date();
                let streak = 0;
                let currentDate = new Date(today);

                while (true) {
                    const dateStr = currentDate.toISOString().split('T')[0];
                    if (habit.completedDays.includes(dateStr)) {
                        streak++;
                        currentDate.setDate(currentDate.getDate() - 1);
                    } else {
                        break;
                    }
                }

                habit.streak = streak;
            }

            deleteHabit(habitId) {
                this.habits = this.habits.filter(h => h.id !== habitId);
                this.saveHabits();
                this.renderHabits();
                this.updateStats();
                this.updateAnalytics();
            }

            renderHabits() {
                const container = document.getElementById('habitsContainer');

                if (this.habits.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üéØ</div>
                            <p>No habits yet. Start by adding your first habit above!</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.habits.map(habit => {
                    const completedToday = habit.completedDays.includes(this.today);
                    const completionRate = Math.round((habit.completedDays.length / Math.max(this.getDaysSinceCreation(habit), 1)) * 100);

                    return `
                        <div class="habit-card ${completedToday ? 'completed' : ''}">
                            <div class="habit-header">
                                <div>
                                    <div class="habit-title">${habit.name}</div>
                                    <span class="habit-priority priority-${habit.priority}">${habit.priority.toUpperCase()}</span>
                                </div>
                            </div>
                            <div class="habit-info">
                                <div class="habit-stat">
                                    <span class="habit-stat-label">Streak</span>
                                    <span class="habit-stat-value">üî• ${habit.streak}</span>
                                </div>
                                <div class="habit-stat">
                                    <span class="habit-stat-label">Completed</span>
                                    <span class="habit-stat-value">${habit.completedDays.length}</span>
                                </div>
                                <div class="habit-stat">
                                    <span class="habit-stat-label">Rate</span>
                                    <span class="habit-stat-value">${completionRate}%</span>
                                </div>
                                <div class="habit-stat">
                                    <span class="habit-stat-label">Due</span>
                                    <span class="habit-stat-value">${new Date(habit.deadline).toLocaleDateString('en-US', {month: 'short', day: 'numeric'})}</span>
                                </div>
                            </div>
                            ${habit.description ? `<p style="opacity: 0.7; margin-bottom: 15px; font-size: 0.9rem;">${habit.description}</p>` : ''}
                            <div class="days-tracker" id="days-${habit.id}">
                                ${this.renderDayButtons(habit)}
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${completionRate}%"></div>
                            </div>
                            <div class="habit-actions">
                                <button class="btn btn-danger" onclick="tracker.deleteHabit(${habit.id})">üóëÔ∏è Delete</button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderDayButtons(habit) {
                const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                let html = '';

                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    const isCompleted = habit.completedDays.includes(dateStr);
                    const dayName = days[date.getDay()];

                    html += `
                        <button class="day-btn ${isCompleted ? 'active' : ''}" 
                                onclick="tracker.toggleDay(${habit.id}, '${dateStr}')"
                                title="${dateStr}">
                            ${dayName}
                        </button>
                    `;
                }

                return html;
            }

            getDaysSinceCreation(habit) {
                const created = new Date(habit.createdAt);
                const today = new Date();
                return Math.floor((today - created) / (1000 * 60 * 60 * 24)) + 1;
            }

            updateStats() {
                const completedToday = this.habits.filter(h => h.completedDays.includes(this.today)).length;
                const totalCompletion = this.habits.length > 0
                    ? Math.round((this.habits.reduce((sum, h) => sum + h.completedDays.length, 0) /
                      (this.habits.length * Math.max(...this.habits.map(h => this.getDaysSinceCreation(h))))) * 100)
                    : 0;
                const longestStreak = this.habits.length > 0
                    ? Math.max(...this.habits.map(h => h.streak))
                    : 0;

                document.getElementById('totalHabits').textContent = this.habits.length;
                document.getElementById('completedToday').textContent = completedToday;
                document.getElementById('completionRate').textContent = totalCompletion + '%';
                document.getElementById('longestStreak').textContent = longestStreak;
            }

            updateAnalytics() {
                this.updateTopHabits();
                this.updateDeadlines();
                this.updateWeeklyStats();
            }

            updateTopHabits() {
                const sorted = [...this.habits].sort((a, b) => b.streak - a.streak).slice(0, 5);
                const container = document.getElementById('topHabits');

                if (sorted.length === 0) {
                    container.innerHTML = '<li style="opacity: 0.5;">No habits tracked yet</li>';
                    return;
                }

                container.innerHTML = sorted.map(habit => `
                    <li>
                        <span>${habit.name}</span>
                        <span class="habit-badge">üî• ${habit.streak} day streak</span>
                    </li>
                `).join('');
            }

            updateDeadlines() {
                const sorted = [...this.habits].sort((a, b) =>
                    new Date(a.deadline) - new Date(b.deadline)
                ).slice(0, 5);

                const container = document.getElementById('deadlines');

                if (sorted.length === 0) {
                    container.innerHTML = '<li style="opacity: 0.5;">No deadlines</li>';
                    return;
                }

                container.innerHTML = sorted.map(habit => {
                    const deadline = new Date(habit.deadline);
                    const daysLeft = Math.ceil((deadline - new Date()) / (1000 * 60 * 60 * 24));
                    return `<li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <strong>${habit.name}</strong><br>
                        <small style="opacity: 0.7;">${daysLeft > 0 ? `${daysLeft} days left` : 'Overdue'}</small>
                    </li>`;
                }).join('');
            }

            updateWeeklyStats() {
                const container = document.getElementById('weeklyStats');
                const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                let stats = '';

                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    const completed = this.habits.filter(h => h.completedDays.includes(dateStr)).length;

                    stats += `<div style="margin-bottom: 10px;">
                        <small>${days[date.getDay()]}</small>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(completed / Math.max(this.habits.length, 1) * 100)}%"></div>
                        </div>
                        <small>${completed}/${this.habits.length}</small>
                    </div>`;
                }

                container.innerHTML = stats || '<p style="opacity: 0.5;">No data yet</p>';
            }

            saveHabits() {
                localStorage.setItem('habits', JSON.stringify(this.habits));
            }

            loadHabits() {
                const saved = localStorage.getItem('habits');
                return saved ? JSON.parse(saved) : [];
            }
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            new ParticleSystem(document.getElementById('particleCanvas'));
            window.tracker = new HabitTracker();
        });
    </script>
</body>
</html>
